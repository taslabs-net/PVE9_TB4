#!/bin/sh

# Check for AI-generated signatures and reject them
commit_msg=$(cat "$1")

# Check for common AI-generated signatures (case-insensitive)
if echo "$commit_msg" | grep -qiE "🤖 Generated|Co-Authored-By:\s*(Claude|AI|Bot)|Generated with \[Claude|noreply@anthropic\.com|^\s*Generated by AI|^\s*AI[- ]generated"; then
  echo "❌ Error: Commit message contains AI-generated signatures."
  echo "Please remove any AI attribution lines like:"
  echo "  - '🤖 Generated with [Claude Code]'"
  echo "  - 'Co-Authored-By: Claude <noreply@anthropic.com>'"
  echo "  - Similar AI/bot signatures"
  exit 1
fi

# Run commitlint as usual
npx --no -- commitlint --edit ${1}
